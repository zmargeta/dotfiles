if type -q fzf
  if type -q fd
    set -gx FZF_DEFAULT_COMMAND 'fd --type f --strip-cwd-prefix'
    set -gx FZF_DEFAULT_OPTS '
        --ansi
        --prompt=\' \'
        --pointer=
        --marker=
        --height=10%
        --layout=default
        --scheme=default
        --color=bg+:#3c3836,bg:#32302f,spinner:#8ec07c,hl:#83a598
        --color=fg:#bdae93,header:#83a598,info:#fabd2f,pointer:#8ec07c
        --color=marker:#8ec07c,fg+:#ebdbb2,prompt:#fabd2f,hl+:#83a598'
    set -gx FZF_CTRL_T_COMMAND 'fd --type f --strip-cwd-prefix $dir'
    set -gx FZF_CTRL_T_OPTS '--height=10% --layout=reverse-list --scheme=path'
    set -gx FZF_ALT_C_COMMAND 'fd --type d --strip-cwd-prefix $dir'
    set -gx FZF_ALT_C_OPTS '--height=10% --layout=reverse-list --scheme=path'
    set -gx FZF_CTRL_R_OPTS '--height=10% --scheme=history'
  end
{{- if eq .chezmoi.os "darwin" }}
  if type -q brew
    set -l path (brew --prefix fzf)/shell/key-bindings.fish
    if test -f $path
      source $path
      fzf_key_bindings
    end
  end
{{- end }}
end
